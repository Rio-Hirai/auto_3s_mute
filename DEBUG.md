# Auto 3s Mute デバッグガイド

## すぐにミュートされる問題の解決方法

### 🔍 デバッグモードの有効化

Google Meet ページで以下のコマンドをブラウザのコンソール（F12）で実行してください：

```javascript
// デバッグモードを有効にする
autoMuteDebug.toggle();
```

これにより、画面右上にリアルタイムの音声レベル情報が表示されます。

### 📊 表示される情報

- **音量レベル**: 現在のマイクの音声レベル（0-1 の範囲）
- **閾値**: ミュート判定の閾値
- **無音時間**: 現在の無音継続時間 / 設定された無音時間
- **ミュート状態**: 現在のミュート状態（ON/OFF）
- **監視状態**: 音声監視の状態（ON/OFF）

### ⚙️ 音量閾値の調整

音声レベルが低すぎる場合は、閾値を下げてください：

```javascript
// 閾値を0.005に設定（より敏感に）
autoMuteDebug.setThreshold(0.005);

// 閾値を0.02に設定（少し鈍感に）
autoMuteDebug.setThreshold(0.02);
```

### 🔧 現在の設定確認

```javascript
// 現在の設定を確認
autoMuteDebug.getInfo();
```

### 📝 トラブルシューティング

#### 問題 1: 音声レベルが常に 0.0000 と表示される

- マイクのアクセス許可が正しく与えられているか確認
- 他のアプリケーションがマイクを使用していないか確認
- ブラウザの設定でマイクが無効になっていないか確認

#### 問題 2: 音声レベルは正常だがすぐにミュートされる

- 閾値が高すぎる可能性があります
- `autoMuteDebug.setThreshold(0.001)` でより低い閾値を試してください

#### 問題 3: 音声が検出されてもミュートが解除されない

- Google Meet のミュートボタンのセレクタが変更された可能性があります
- ブラウザのコンソールでエラーメッセージを確認してください

#### 問題 4: "Cannot read properties of undefined (reading 'create')" エラー

- 拡張機能の権限が不足しています
- 拡張機能を再読み込みしてください
- それでも解決しない場合は、拡張機能を一度無効化してから再有効化してください

#### 問題 5: "Unable to download all specified images" エラー

- 通知で使用しているアイコンファイルが存在しないか、正しく読み込めません
- 通知機能を無効化することをお勧めします
- 詳細設定で「通知を表示する」のチェックを外してください

### 🎯 推奨設定

環境に応じた推奨設定：

- **静かな環境**: 閾値 0.001-0.005
- **普通の環境**: 閾値 0.01-0.02
- **騒がしい環境**: 閾値 0.05-0.1

### 🔄 設定のリセット

問題が解決しない場合は、拡張機能の設定をリセットしてください：

1. 拡張機能のポップアップを開く
2. 「詳細設定」をクリック
3. 「デフォルトに戻す」をクリック

### ❌ エラー: "Some of the required properties are missing: type, iconUrl, title and message"

**症状**: 通知機能でエラーが発生する

**原因**: Chrome Notifications API で必要なプロパティが不足している

**解決方法**:

1. 拡張機能を再読み込み
2. 通知設定を一度無効にしてから有効にする
3. ブラウザを再起動

**技術的詳細**:

- `chrome.notifications.create`で必要なプロパティ（type, iconUrl, title, message）がすべて含まれているか確認
- アイコンファイルが存在しない場合は、フォールバック処理でアイコンなし通知を表示

### 📞 サポート

問題が解決しない場合は、以下の情報とともに報告してください：

1. ブラウザの種類とバージョン
2. 音声レベル表示のスクリーンショット
3. コンソールに表示されるエラーメッセージ
4. 使用環境（静かな部屋、オフィスなど）
